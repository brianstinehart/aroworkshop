I"`
<p>If we look at the tile on the left we should see one box randomly changing colors.  This box displays the randomly generated color sent to the frontend by our microservice along with the pod name that sent it. Since we see only one box that means there is only one microservice pod.  We will now scale up our microservice pods and will see the number of boxes change.</p>

<p>To confirm that we only have one pod running for our microservice, run the following command, or use the web UI.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>okashi@ok-vm ostoy]# oc get pods
NAME                                   READY     STATUS    RESTARTS   AGE
ostoy-frontend-679cb85695-5cn7x       1/1       Running   0          1h
ostoy-microservice-86b4c6f559-p594d   1/1       Running   0          1h
</code></pre></div></div>

<p>Let’s change our microservice definition yaml to reflect that we want 3 pods instead of the one we see.  Download the <a href="/yaml/ostoy-microservice-deployment.yaml">ostoy-microservice-deployment.yaml</a> and save it on your local machine.</p>

<p>Open the file using your favorite editor. Ex: <code class="language-plaintext highlighter-rouge">vi ostoy-microservice-deployment.yaml</code>.</p>

<p>Find the line that states <code class="language-plaintext highlighter-rouge">replicas: 1</code> and change that to <code class="language-plaintext highlighter-rouge">replicas: 3</code>. Then save and quit.</p>

<p>It will look like this</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spec:
    selector:
      matchLabels:
        app: ostoy-microservice
    replicas: 3
</code></pre></div></div>

<p>Assuming you are still logged in via the CLI, execute the following command:</p>

<p><code class="language-plaintext highlighter-rouge">oc apply -f ostoy-microservice-deployment.yaml</code></p>

<p>Confirm that there are now 3 pods via the CLI (<code class="language-plaintext highlighter-rouge">oc get pods</code>) or the web UI (<em>Overview &gt; expand “ostoy-microservice”</em>).</p>

<p>See this visually by visiting the OSToy app and seeing how many boxes you now see.  It should be three.</p>

<p><img src="media/managedlab/22-ostoy-colorspods.png" alt="UI Scale" /></p>

<p>Now we will scale the pods down using the command line.  Execute the following command from the CLI:</p>

<p><code class="language-plaintext highlighter-rouge">oc scale deployment ostoy-microservice --replicas=2</code></p>

<p>Confirm that there are indeed 2 pods, via the CLI (<code class="language-plaintext highlighter-rouge">oc get pods</code>) or the web UI.</p>

<p>See this visually by visiting the OSToy App and seeing how many boxes you now see.  It should be two.</p>

<p>Lastly let’s use the web UI to scale back down to one pod.  In the project you created for this app (ie: “ostoy”) in the left menu click <em>Overview &gt; expand “ostoy-microservice”</em>.  On the right you will see a blue circle with the number 2 in the middle. Click on the down arrow to the right of that to scale the number of pods down to 1.</p>

<p><img src="media/managedlab/21-ostoy-uiscale.png" alt="UI Scale" /></p>

<p>See this visually by visiting the OSToy app and seeing how many boxes you now see.  It should be one.  You can also confirm this via the CLI or the web UI</p>

:ET